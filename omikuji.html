<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>é˜²çŠ¯ãŠã¿ãã˜ - ã‚¬ãƒ¼ãƒ‰ãƒ¯ãƒ³</title>
<style>
       body {
           background-color: #FFF9E6; /* æ¸©ã‹ã¿ã®ã‚ã‚‹èƒŒæ™¯è‰² */
           font-family: "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
           display: flex;
           flex-direction: column;
           align-items: center;
           justify-content: center;
           min-height: 100vh;
           margin: 0;
           overflow: hidden;
       }
       h1 { color: #8B4513; margin-bottom: 10px; font-size: 24px; }
       #game-container { position: relative; width: 350px; height: 450px; }
       canvas {
           background: #fff;
           border: 8px solid #E5C455;
           border-radius: 30px;
           box-shadow: 0 10px 0 #C4A746;
           cursor: pointer;
           touch-action: manipulation;
       }
       .ui-layer {
           position: absolute;
           bottom: 20px;
           width: 100%;
           text-align: center;
           pointer-events: none;
       }
       #result-card {
           position: fixed;
           top: 50%;
           left: 50%;
           transform: translate(-50%, -50%) scale(0);
           width: 80%;
           max-width: 300px;
           background: white;
           border: 5px solid #FFD700;
           border-radius: 20px;
           padding: 20px;
           text-align: center;
           transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
           z-index: 100;
           box-shadow: 0 0 0 999px rgba(0,0,0,0.5);
       }
       #result-card.show { transform: translate(-50%, -50%) scale(1); }
       .btn {
           background: #FF6B6B;
           color: white;
           border: none;
           padding: 10px 20px;
           border-radius: 50px;
           font-size: 18px;
           font-weight: bold;
           cursor: pointer;
           margin-top: 15px;
           pointer-events: auto;
       }
</style>
</head>
<body>
<h1>ğŸ¶ ã‚¬ãƒ¼ãƒ‰ãƒ¯ãƒ³ã®é˜²çŠ¯ãŠã¿ãã˜</h1>
<div id="game-container">
<canvas id="omikujiCanvas" width="350" height="450"></canvas>
<div class="ui-layer">
<p style="font-weight: bold; color: #666;">ã‚¿ãƒƒãƒ—ã—ã¦ç®±ã‚’æŒ¯ã‚‹ãƒ¯ãƒ³ï¼</p>
</div>
</div>
<div id="result-card" id="resultCard">
<h2 id="luckRank" style="font-size: 28px; margin: 10px 0; color: #E74C3C;"></h2>
<p id="luckDesc" style="font-size: 16px; line-height: 1.6;"></p>
<div style="border-top: 1px dashed #ccc; margin: 15px 0;"></div>
<p id="luckAction" style="font-weight: bold; color: #27AE60;"></p>
<button class="btn" onclick="closeResult()">ã‚‚ã†ä¸€åº¦</button>
</div>
<script>
       const canvas = document.getElementById('omikujiCanvas');
       const ctx = canvas.getContext('2d');
       const card = document.getElementById('result-card');
       let isShaking = false;
       let shakeTime = 0;
       const results = [
           { rank: "é˜²çŠ¯å¤§å‰", desc: "ã‚ã‚“ãŸã®è­¦æˆ’å¿ƒã¯æœ€é«˜ã ï¼è©æ¬ºå¸«ã‚‚å°»å°¾ã‚’å·»ã„ã¦é€ƒã’å‡ºã™ãƒ¯ãƒ³ï¼", action: "åˆè¨€è‘‰ã‚’å®¶æ—ã¨æ±ºã‚ã‚ˆã†" },
           { rank: "ç•™å®ˆé›»å‰", desc: "çŸ¥ã‚‰ãªã„ç•ªå·ã¯ã€å®ãã˜ã®å½“é¸ã€ã˜ã‚ƒãªãã¦ã€ç½ ã€ã ã¨æ€ãˆã°å®‰æ³°ã ãƒ¯ãƒ³ã€‚", action: "å¸¸ã«ç•™å®ˆé›»ã«ã—ã¦ãŠã“ã†" },
           { rank: "ç¢ºèªä¸­å‰", desc: "ç„¦ã‚‰ã™é›»è©±ãŒæ¥ãŸã‚‰ã€ã¾ãšã¯ç¾å‘³ã—ã„ãŠèŒ¶ã‚’ä¸€æ¯é£²ã‚€ä½™è£•ã‚’æŒã¤ãƒ¯ãƒ³ã€‚", action: "1åˆ†é–“ã€é›»è©±ã‚’ç½®ã„ã¦å¾…ã¨ã†" },
           { rank: "ç›¸è«‡æœ«å‰", desc: "ç‹¬ã‚Šã§æ‚©ã‚€ã®ã¯è©æ¬ºå¸«ã®æ€ã†ãƒ„ãƒœã€‚å‘¨ã‚Šã‚’é ¼ã‚‹å‹‡æ°—ãŒç¦ã‚’å‘¼ã¶ãƒ¯ãƒ³ã€‚", action: "è­¦å¯Ÿç›¸è«‡é›»è©±ã€Œ#9110ã€ã‚’è¦šãˆã‚ˆã†" }
       ];
       // ç°¡æ˜“æç”»ï¼šã‚¬ãƒ¼ãƒ‰ãƒ¯ãƒ³
       function draw(offsetY = 0, angle = 0) {
           ctx.clearRect(0, 0, canvas.width, canvas.height);
           ctx.save();
           ctx.translate(175, 225 + offsetY);
           ctx.rotate(angle);
           // ä½“
           ctx.fillStyle = "#F3E5AB";
           ctx.beginPath();
           ctx.ellipse(0, 50, 60, 80, 0, 0, Math.PI * 2);
           ctx.fill();
           // é¡”
           ctx.beginPath();
           ctx.arc(0, -30, 70, 0, Math.PI * 2);
           ctx.fill();
           // ç›®
           ctx.fillStyle = "#333";
           ctx.beginPath(); ctx.arc(-25, -40, 8, 0, Math.PI * 2); ctx.fill();
           ctx.beginPath(); ctx.arc(25, -40, 8, 0, Math.PI * 2); ctx.fill();
           // é¼»ã¨å£
           ctx.beginPath(); ctx.arc(0, -15, 6, 0, Math.PI * 2); ctx.fill();
           ctx.strokeStyle = "#333"; ctx.lineWidth = 2;
           ctx.beginPath(); ctx.arc(0, -10, 10, 0.2, Math.PI - 0.2); ctx.stroke();
           // ãŠã¿ãã˜ç®±
           ctx.fillStyle = "#8B4513";
           ctx.rotate(Math.sin(Date.now()/50)*0.1 * (isShaking?1:0));
           ctx.fillRect(-40, 40, 80, 110);
           ctx.fillStyle = "#FFD700";
           ctx.font = "bold 20px sans-serif";
           ctx.textAlign = "center";
           ctx.fillText("é˜²çŠ¯", 0, 85);
           ctx.fillText("ã¿ãã˜", 0, 115);
           ctx.restore();
       }
       function startShake() {
           if (isShaking) return;
           isShaking = true;
           let start = Date.now();
           function animate() {
               let elapsed = Date.now() - start;
               let offsetY = Math.sin(elapsed / 30) * 15;
               let angle = Math.sin(elapsed / 50) * 0.05;
               draw(offsetY, angle);
               if (elapsed < 1500) {
                   requestAnimationFrame(animate);
               } else {
                   isShaking = false;
                   showResult();
               }
           }
           animate();
       }
       function showResult() {
           const res = results[Math.floor(Math.random() * results.length)];
           document.getElementById('luckRank').innerText = res.rank;
           document.getElementById('luckDesc').innerText = res.desc;
           document.getElementById('luckAction').innerText = "ğŸ’¡ " + res.action;
           card.classList.add('show');
       }
       function closeResult() {
           card.classList.remove('show');
           draw();
       }
       canvas.addEventListener('click', startShake);
       draw();
</script>
</body>
</html>